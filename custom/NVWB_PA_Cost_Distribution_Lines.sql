-- *******************************************************************************
-- FileName:             NVWB_PA_Cost_Distribution_Lines.sql
--
-- Date Created:         2019/Aug/28 06:12:39
-- Created By:           nemuser
--
-- Source:
-- - Package:            Package_2018_P11_B1_DEV_NEW
-- - Environment:        EBSPJD1
-- - NoetixViews Schema: NOETIX_VIEWS
--
-- Versions:
-- - Oracle EBS:   12.1.3
-- - Oracle DB:    11.2.0
-- - NoetixViews:  6.5.1
--
-- *******************************************************************************
-- output to NVWB_PA_Cost_Distribution_Lines.lst file

@utlspon NVWB_PA_Cost_Distribution_Lines

-- *******************************************************************************
-- Revision Number: 1
-- *******************************************************************************

SET DEFINE OFF;
WHENEVER SQLERROR EXIT 1064;

UPDATE n_view_templates 
   SET application_label = 'PA',
       description = 'PA Basic - Cost Distribution Lines Details',
       profile_option = null,
       essay = 'This view is modified for applying the custom security requirements for Viasat.  This view returns information about the cost distributions to various accounts for each expenditure items for project/tasks. Each cost distribution line for every expenditure item appears in a separate line. The Dist_Line_Type column indicates the type of the distribution line such as ''Raw'' or ''Burdened Credit'' or ''Burdened Debit''. The GL account to which the charges are debited is shown along with the GL liability account that is being credited. The supplier invoice information is shown for the expenditure items that are related to the supplier invoices. This view shows the GL and PA period for each expenditure item and also the transfer status information for each cost distribution line as the information is transferred to other applications such as Oracle General Ledger or Oracle Payables. This view returns one row for each combination of cost distribution line number, expenditure item date, expenditure type, project number, task number and transaction identifier columns.  To use this view specify the Project_Number and Task_Number.',
       keywords = 'K{\footnote Project Cost Distribution Lines}K{\footnote Project Expenditures}K{\footnote Task Expenditures}K{\footnote Expenditure Items}',
       product_version = '10.7+',
       include_flag = 'Y',
       user_include_flag = 'Y',
       export_view = 'Y',
       security_code = 'NONE',
       special_process_code = 'NONE',
       sort_layer = null,
       freeze_flag = 'Y',
       last_updated_by = 'nemuser',
       last_update_date = TO_DATE('2016-05-21 04:30:37','YYYY-MM-DD HH24:MI:SS'),
       original_version = '4.4.0.163',
       current_version = '6.3.0.1275'
 WHERE upper(view_label) = 'PA_COST_DISTRIBUTION_LINES';


UPDATE n_view_column_templates
   SET view_label = 'PA_Cost_Distribution_Lines',
       query_position = 1.0,
       column_label = 'Burdened_Cost',
       table_alias = null,
       column_expression = 'DECODE(INSTR(UPPER(EXPI.EXPENDITURE_TYPE),''LABOR''), 0, NVL(CDIST.DENOM_BURDENED_COST,0) ,                          DECODE (APPS.XXNAO_NOETIX_VSAT_SECURITY_PKG.VIEW_COST(APPS.XXNAO_FND_WRAPPER_PKG.USER_ID),''Y'', NVL(CDIST.DENOM_BURDENED_COST,0) , -9999))',
       column_position = 19.0,
       column_type = 'EXPR',
       description = 'The amount of the burdened cost. Field modified by Zensar for Viasat security requirements.',
       ref_application_label = null,
       ref_table_name = null,
       key_view_label = null,
       ref_lookup_column_name = null,
       ref_description_column_name = null,
       ref_lookup_type = null,
       id_flex_application_id = null,
       id_flex_code = null,
       group_by_flag = 'N',
       format_mask = null,
       format_class = 'NUMERIC REAL',
       gen_search_by_col_flag = 'N',
       lov_view_label = null,
       lov_column_label = null,
       profile_option = 'PA_NO_MULTI_CURRENCY_58',
       product_version = '*',
       include_flag = 'Y',
       user_include_flag = 'Y',
       last_updated_by = 'nemuser',
       last_update_date = TO_DATE('2016-05-21 04:30:37','YYYY-MM-DD HH24:MI:SS')
 WHERE t_column_id = 28520;



UPDATE n_view_column_templates
   SET view_label = 'PA_Cost_Distribution_Lines',
       query_position = 1.0,
       column_label = 'GL_Period',
       table_alias = 'PAP',
       column_expression = 'GL_PERIOD_NAME',
       column_position = 27.0,
       column_type = 'COL',
       description = 'The GL period that matches the PA period. Field modified by Zensar.',
       ref_application_label = null,
       ref_table_name = null,
       key_view_label = null,
       ref_lookup_column_name = null,
       ref_description_column_name = null,
       ref_lookup_type = null,
       id_flex_application_id = null,
       id_flex_code = null,
       group_by_flag = 'N',
       format_mask = null,
       format_class = 'STRING',
       gen_search_by_col_flag = 'N',
       lov_view_label = 'PA_Lov_GL_Periods',
       lov_column_label = 'Period_Name',
       profile_option = null,
       product_version = '*',
       include_flag = 'Y',
       user_include_flag = 'Y',
       last_updated_by = 'nemuser',
       last_update_date = TO_DATE('2016-05-21 04:30:37','YYYY-MM-DD HH24:MI:SS')
 WHERE t_column_id = 28722;



INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'Transaction_Source',
      'EXPI',
      'TRANSACTION_SOURCE',
      10.400002,
      'COL',
      'Transaction source. Custom Field Added by Zensar.',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'System_Linkage_Function',
      'EXPI',
      'SYSTEM_LINKAGE_FUNCTION',
      10.300001,
      'COL',
      'System linkage function. Custom Field Added by Zensar.',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'Expenditure_Trx_Source',
      'EXPI',
      'TRANSACTION_SOURCE',
      10.600002,
      'COL',
      'Expenditure_Trx_Source,Custom Feild Added by Zensar',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'dpagadala',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'Cost_Ind_Rate_Schedule_ID',
      'PROJ',
      'COST_IND_RATE_SCH_ID',
      10.200001,
      'COL',
      'Cost indicator rate schedule identifier. Custom Field Added by Zensar.',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'Burdened_Cost_Orig',
      null,
      'NVL(CDIST.DENOM_BURDENED_COST,0)',
      10.700003,
      'EXPR',
      'Custom Field added by Zensar.',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'Labor_Hours',
      null,
      '(DECODE (            CDIST.line_num,            1, DECODE (EXPI.system_linkage_function,                       ''ST'', EXPI.QUANTITY,                       ''OT'', EXPI.QUANTITY,                       ''WIP'', DECODE (EXPI.job_id, NULL, 0, EXPI.QUANTITY),                         0)))',
      10.1,
      'EXPR',
      'Labor Hours  Custom Field Added by Zensar',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'dpagadala',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      'Expenditure_Group',
      'EXP',
      'EXPENDITURE_GROUP',
      10.500002,
      'COL',
      'Expenditure group. Custom Field Added by Zensar.',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '*',
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );


INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'PA_Cost_Distribution_Lines',
      1.0,
      34.0,
      'AND (PROJ.PROJECT_ID IN (SELECT PROJECT_ID FROM PAG0_USER_PROJECTS_VSAT_BASE WHERE USER_ID = APPS.XXNAO_FND_WRAPPER_PKG.USER_ID))',
      null,
      null,
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );





COMMIT;
SET DEFINE ON;
WHENEVER SQLERROR CONTINUE;

@utlspoff
-- *******************************************************************************
-- FileName:             NVWB_INV_Onhand_Last_Used_Vsat.sql
--
-- Date Created:         2019/Aug/28 06:12:39
-- Created By:           nemuser
--
-- Source:
-- - Package:            Package_2018_P11_B1_DEV_NEW
-- - Environment:        EBSPJD1
-- - NoetixViews Schema: NOETIX_VIEWS
--
-- Versions:
-- - Oracle EBS:   12.1.3
-- - Oracle DB:    11.2.0
-- - NoetixViews:  6.5.1
--
-- *******************************************************************************
-- output to NVWB_INV_Onhand_Last_Used_Vsat.lst file

@utlspon NVWB_INV_Onhand_Last_Used_Vsat

-- *******************************************************************************
-- Revision Number: 3
-- *******************************************************************************

SET DEFINE OFF;
WHENEVER SQLERROR EXIT 912;

INSERT INTO n_view_templates(
      view_label,
      application_label,
      description,
      profile_option,
      essay,
      keywords,
      product_version,
      include_flag,
      user_include_flag,
      export_view,
      security_code,
      special_process_code,
      sort_layer,
      freeze_flag,
      created_by,
      last_updated_by,
      original_version,
      current_version
  ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      'INV',
      'Base View: ViaSat Custom',
      null,
      'This custom inventory view shows onhand inventory for an item and its latest usage date. This view also includes item supply/demand information. A record will be returned for each combination of organization, item number, and onhand subinventory/locator.',
      null,
      '%',
      'Y',
      'Y',
      'Y',
      'NONE',
      'NONE',
      null,
      'N',
      'dpagadala',
      'nemuser',
      null,
      null
  );

INSERT INTO n_view_query_templates(
      view_label,
      query_position,
      union_minus_intersection,
      group_by_flag,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      view_comment,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      null,
      'N',
      null,
      '%',
      'Y',
      'Y',
      null,
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'MP',
      8.0,
      'INV',
      'MTL_PARAMETERS',
      null,
      '%',
      'Y',
      'Y',
      'N',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'N'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'MOL',
      1.0,
      'INV',
      'MTL_ONHAND_QUANTITIES_DETAIL',
      null,
      '%',
      'Y',
      'Y',
      'N',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'N'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'MIL',
      2.0,
      'INV',
      'MTL_ITEM_LOCATIONS',
      null,
      '%',
      'Y',
      'Y',
      'N',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'N'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'MSI',
      7.0,
      'INV',
      'MTL_SYSTEM_ITEMS_B',
      null,
      '%',
      'Y',
      'Y',
      'Y',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'Y'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'ITCAT',
      4.0,
      'INV',
      'MTL_ITEM_CATEGORIES',
      null,
      '%',
      'Y',
      'Y',
      'Y',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'Y'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'CAT',
      5.0,
      'INV',
      'MTL_CATEGORIES_B',
      null,
      '%',
      'Y',
      'Y',
      'Y',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'Y'
   );

INSERT INTO n_view_table_templates(
      view_label,
      query_position,
      table_alias,
      from_clause_position,
      application_label,
      table_name,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      base_table_flag,
      key_view_label,
      subquery_flag,
      created_by,
      last_updated_by,
      gen_search_by_col_flag
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'OOD',
      6.0,
      'HR',
      'HR_ALL_ORGANIZATION_UNITS_TL',
      null,
      '%',
      'Y',
      'Y',
      'Y',
      null,
      'N',
      'dpagadala',
      'dpagadala',
      'Y'
   );

INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Subinventory_Code',
      'MOL',
      'SUBINVENTORY_CODE',
      10.300001,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'nemuser',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Gross_Req',
      null,
      '(SELECT NVL (SUM (ABS (mosvr.quantity_rate)), 0)              FROM apps.mrp_orders_sc_v mosvr             WHERE ( (source_table = ''MRP_GROSS_REQUIREMENTS''                      AND order_type IN                             (1,                              2,                              3,                              4,                              6,                              7,                              24,                              22,                              25,                              16,                              17,                              18,                              19,                              20,                              21,                              23,                              26,                              5,                              8,                              9,                              10,                              11,                              12,                              15,                              27)))                   AND mosvr.organization_id = msi.organization_id                   AND mosvr.inventory_item_id = msi.inventory_item_id)',
      12.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Organization_Name',
      'OOD',
      'name',
      1.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Item_Number',
      'MSI',
      'segment1',
      2.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Last_Used',
      null,
      '(SELECT MAX (mmt.transaction_date)              FROM inv.mtl_material_transactions mmt,                   inv.mtl_transaction_types mtt             WHERE mmt.transaction_type_id = mtt.transaction_type_id                   AND mmt.transaction_action_id NOT IN (24, 30)                   AND UPPER (mtt.transaction_type_name) IN                          (SELECT UPPER (v.flex_value)                             FROM APPLSYS.fnd_flex_values v,                                  APPLSYS.fnd_flex_value_sets s                            WHERE s.flex_value_set_name LIKE                                     ''VSAT_MRP_TOTAL_CONSUMP_TRANSACTIONS''                                  AND s.flex_value_set_id =                                         v.flex_value_set_id                                  AND v.enabled_flag = ''Y''                                  AND NVL (v.start_date_active,                                           mmt.transaction_date) <=                                         mmt.transaction_date                                  AND NVL (v.end_date_active,                                           mmt.transaction_date) >=                                         mmt.transaction_date)                   AND mmt.organization_id = msi.organization_id                   AND mmt.inventory_item_id = msi.inventory_item_id                   AND mmt.created_by NOT IN                          (22891, 50951, 50952, 17090, 17110)                    AND TO_DATE (mmt.transaction_date, ''dd-mon-yy'') <=                          TO_DATE (SYSDATE, ''dd-mon-yy''))',
      14.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Creation_Date',
      'MSI',
      'creation_date',
      4.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Last_Receipt',
      null,
      '(SELECT MAX (mmt.transaction_date)              FROM inv.mtl_material_transactions mmt,                   inv.mtl_transaction_types mtt             WHERE     mmt.transaction_type_id = mtt.transaction_type_id                   AND mmt.transaction_action_id = 27                   AND mmt.transaction_type_id IN (18, 104, 105)                   AND mmt.organization_id = msi.organization_id                   AND mmt.inventory_item_id = msi.inventory_item_id                   AND mmt.created_by NOT IN                          (22891, 50951, 50952, 17090, 17110)                   AND TO_DATE (mmt.transaction_date, ''dd-mon-yy'') <=                          TO_DATE (SYSDATE, ''dd-mon-yy''))',
      15.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Cost_Type',
      null,
      '(SELECT b.cost_type              FROM bom.cst_item_costs a, bom.cst_cost_types b             WHERE     a.cost_type_id = b.cost_type_id                   AND a.organization_id = msi.organization_id                   AND a.organization_id = 48                   AND a.inventory_item_id = msi.inventory_item_id)',
      9.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Description',
      'MSI',
      'description',
      3.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'MSI$INV_Items',
      'MSI',
      'ROWID',
      10.1,
      'ROWID',
      null,
      null,
      null,
      'INV_Items',
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Project_Number',
      null,
      '(SELECT segment1              FROM pa.pa_projects_all             WHERE project_id = mil.segment19)',
      7.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Open_Po_Qty',
      null,
      '(SELECT NVL (SUM (poll.quantity - poll.quantity_received), 0)              FROM po.po_headers_all poh,                   po.po_lines_all pol,                   po.po_line_locations_all poll             WHERE     poh.po_header_id = poll.po_header_id                   AND poll.po_line_id = pol.po_line_id                   AND poll.quantity > poll.quantity_received                   AND pol.item_id = msi.inventory_item_id                   AND poll.ship_to_organization_id = msi.organization_id                    AND NVL (poll.cancel_flag, ''N'') <> ''Y''                   AND NVL (pol.closed_code, ''OPEN'') = ''OPEN'')',
      16.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Organization_Id',
      'MSI',
      'organization_id',
      20.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Safety_Stock_Quantity',
      null,
      '(SELECT SUM (mss.safety_stock_quantity) safety_stock_quantity              FROM inv.mtl_safety_stocks mss             WHERE mss.organization_id = msi.organization_id                   AND mss.inventory_item_id = msi.inventory_item_id)',
      18.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Product_Line',
      'CAT',
      'segment6',
      10.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Primary_Trx_Quantity',
      null,
      'NVL (mol.primary_transaction_quantity, 0)',
      5.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Inventory_Item_Id',
      'MSI',
      'inventory_item_id',
      19.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Org_Open_Po_Qty',
      null,
      '(SELECT NVL (SUM (poll.quantity - poll.quantity_received), 0)              FROM po.po_headers_all poh,                   po.po_lines_all pol,                   po.po_line_locations_all poll             WHERE     poh.po_header_id = poll.po_header_id                   AND poll.po_line_id = pol.po_line_id                   AND poll.quantity > poll.quantity_received                   AND pol.item_id = msi.inventory_item_id                   AND NVL (poll.cancel_flag, ''N'') <> ''Y''                   AND poll.ship_to_organization_id = msi.organization_id                   AND NVL (pol.closed_code, ''OPEN'') = ''OPEN'')',
      17.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Organization_Code',
      'MP',
      'ORGANIZATION_CODE',
      10.200001,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      null,
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Item_Cost',
      null,
      '(SELECT a.item_cost  FROM bom.cst_item_costs a, bom.cst_cost_types b  WHERE a.cost_type_id = b.cost_type_id  AND a.organization_id = msi.organization_id  AND a.inventory_item_id = msi.inventory_item_id  and rownum=1)',
      8.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'nemuser'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Product_Type',
      'CAT',
      'segment10',
      11.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Stock_Locators',
      'MIL',
      'segment1',
      6.0,
      'COL',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_column_templates(
      view_label,
      query_position,
      column_label,
      table_alias,
      column_expression,
      column_position,
      column_type,
      description,
      ref_application_label,
      ref_table_name,
      key_view_label,
      ref_lookup_column_name,
      ref_description_column_name,
      ref_lookup_type,
      id_flex_application_id,
      id_flex_code,
      group_by_flag,
      format_mask,
      format_class,
      gen_search_by_col_flag,
      lov_view_label,
      lov_column_label,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      'Consumption',
      null,
      '(SELECT NVL (SUM (ABS (mmt.primary_quantity)), 0)              FROM inv.mtl_material_transactions mmt,                   inv.mtl_transaction_types mtt             WHERE mmt.transaction_type_id = mtt.transaction_type_id                   AND mmt.transaction_action_id NOT IN (24, 30)                   AND UPPER (mtt.transaction_type_name) IN                          (SELECT UPPER (v.flex_value)                             FROM APPLSYS.fnd_flex_values v,                                  APPLSYS.fnd_flex_value_sets s                            WHERE s.flex_value_set_name LIKE                                     ''VSAT_MRP_TOTAL_CONSUMP_TRANSACTIONS''                                  AND s.flex_value_set_id =                                         v.flex_value_set_id                                  AND v.enabled_flag = ''Y''                                  AND NVL (v.start_date_active,                                           mmt.transaction_date) <=                                         mmt.transaction_date                                  AND NVL (v.end_date_active,                                           mmt.transaction_date) >=                                         mmt.transaction_date)                   AND TO_DATE (mmt.transaction_date, ''dd-mon-yy'') BETWEEN TO_DATE (                                                                              ADD_MONTHS (                                                                                 SYSDATE,                                                                                 -12),                                                                              ''dd-mon-yy'')                                                                       AND TO_DATE (                                                                              NVL (                                                                                 SYSDATE,                                                                                 TO_DATE (                                                                                    SYSDATE,                                                                                    ''dd-mon-yy'')),                                                                              ''dd-mon-yy'')                   AND (mmt.inventory_item_id = msi.inventory_item_id)                   AND (mmt.organization_id = msi.organization_id))',
      13.0,
      'EXPR',
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      'N',
      null,
      'STRING',
      'N',
      null,
      null,
      null,
      '%',
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );


INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      6.0,
      'and mol.organization_id = mil.organization_id (+)',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      2.0,
      'and msi.organization_id = itcat.organization_id',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      5.0,
      'and msi.organization_id = mol.organization_id (+)',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      1.0,
      'AND msi.inventory_item_id = itcat.inventory_item_id',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      10.0,
      'and mp.organization_id = ood.organization_id',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      3.0,
      'and cat.category_id = itcat.category_id',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      9.0,
      'and itcat.category_set_id = 10',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      8.0,
      'and ood.organization_id = msi.organization_id',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      4.0,
      'and msi.inventory_item_id = mol.inventory_item_id (+)',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );

INSERT INTO n_view_where_templates(
      view_label,
      query_position,
      where_clause_position,
      where_clause,
      profile_option,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INV_Onhand_Last_Used_Vsat',
      1.0,
      7.0,
      'and mol.locator_id = mil.inventory_location_id (+)',
      null,
      null,
      'Y',
      'Y',
      'dpagadala',
      'dpagadala'
   );





COMMIT;
SET DEFINE ON;
WHENEVER SQLERROR CONTINUE;
SET DEFINE OFF;
WHENEVER SQLERROR EXIT 912;

INSERT INTO n_role_view_templates(
      role_label,
      view_label,
      product_version,
      include_flag,
      user_include_flag,
      created_by,
      last_updated_by
   ) VALUES (
      'INVENTORY',
      'INV_Onhand_Last_Used_Vsat',
      '%',
      null,
      null,
      'dpagadala',
      'dpagadala'
   );


COMMIT;
SET DEFINE ON;
WHENEVER SQLERROR CONTINUE;

@utlspoff